{"version":3,"sources":["components/Persons.js","components/PersonForm.js","components/Filter.js","components/Notification.js","services/phonebook.js","App.js","index.js"],"names":["Persons","persons","handleDelete","map","person","name","number","style","marginLeft","onClick","id","PersonForm","eventHandlers","handleSubmit","handleNameChange","handleNumberChange","value","newName","newNumber","onSubmit","onChange","type","Filter","filterText","handleFilterChange","Notification","notification","message","status","className","baseUrl","data","getAll","axios","get","then","response","create","newObject","post","update","put","deleteData","delete","App","useState","setPersons","filteredPersons","setFilteredPersons","setNewName","setNewNumber","setFilterText","notificationMessage","setNotificationMessage","handleNotificationMessage","setTimeout","useEffect","phonebookService","initialPhonebook","deletePerson","text","window","confirm","filter","catch","error","console","log","alert","event","target","toString","trim","splice","newPersons","toLowerCase","includes","preventDefault","length","find","p","newPerson","returnedPerson","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b628ee71.chunk.js","sourcesContent":["const Persons = ({persons, handleDelete}) => {\r\n    return (\r\n        <div>\r\n           {\r\n               persons.map(person => {\r\n                   return (\r\n                       <p key={person.id}>\r\n                           {person.name} {person.number}\r\n                           <button style={{marginLeft: 10}} onClick={()=>handleDelete(person.id, person.name)}>\r\n                                delete\r\n                           </button>\r\n                       </p>\r\n                   )\r\n               })\r\n           }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Persons;","const PersonForm = ({eventHandlers: {handleSubmit, handleNameChange, handleNumberChange}, \r\n                     value: {newName, newNumber}}) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div>\r\n                name: <input value={newName} onChange={handleNameChange}/>\r\n            </div>\r\n            <div>\r\n                number: <input value={newNumber} onChange={handleNumberChange}/>\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm;","const Filter = ({filterText, handleFilterChange}) => {\r\n    return (\r\n        <form>\r\n            <div>\r\n                filter shown with <input value={filterText} onChange={handleFilterChange}/>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default Filter;","const Notification = ({ notification: {message, status } }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className={status}>\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default Notification;","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deleteData = (id) => {\r\n    const request= axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response)\r\n}\r\n\r\nconst data = {getAll, create, update, deleteData}\r\n\r\nexport default data","import React, {useState, useEffect} from 'react'\r\n\r\nimport Persons from './components/Persons'\r\nimport PersonForm from './components/PersonForm'\r\nimport Filter from './components/Filter'\r\nimport Notification from './components/Notification'\r\n\r\nimport phonebookService from './services/phonebook'\r\n\r\nconst App = () => {\r\n    const [persons, setPersons] = useState([])\r\n    const [filteredPersons, setFilteredPersons] = useState([])\r\n\r\n    const [newName, setNewName] = useState('')\r\n    const [newNumber, setNewNumber] = useState('')\r\n    const [filterText, setFilterText] = useState('')\r\n\r\n    const [notificationMessage, setNotificationMessage] = useState({\r\n        message: null,\r\n        status: null\r\n    })\r\n\r\n    const handleNameChange = (event) => setNewName(event.target.value)\r\n    const handleNumberChange = (event) => setNewNumber(event.target.value)\r\n    \r\n    const handleFilterChange = (event) => {\r\n        setFilterText(event.target.value)\r\n\r\n        if(event.target.value.toString().trim() === ''){\r\n            setFilteredPersons(persons.splice())\r\n        } else {\r\n            const newPersons = persons.filter(person => person.name.toLowerCase().includes(event.target.value.toLowerCase()) === true)\r\n            setFilteredPersons(newPersons)\r\n        }\r\n    }\r\n\r\n    const handleNotificationMessage = (name, status) => {\r\n        if(status === 'added'){\r\n            setNotificationMessage({message: `${name} added`, status: 'success'})\r\n        }\r\n        else if(status==='modified'){\r\n            setNotificationMessage({message: `${name} modified`, status: 'success'})\r\n        }\r\n        else {\r\n            setNotificationMessage({message: `Information of ${name} has already been removed from server.`, status:'error'})\r\n        }\r\n\r\n        setTimeout(()=>{\r\n            setNotificationMessage({message: null, status: null})\r\n        }, 5000)\r\n    }\r\n\r\n    useEffect(() => {\r\n        phonebookService\r\n            .getAll()\r\n            .then(initialPhonebook => {\r\n                setPersons(initialPhonebook)\r\n            })\r\n    }, [])\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault()\r\n        if(newName.trim().length < 1){\r\n            alert('Name can not be empty')\r\n            return \r\n        }\r\n        if(newNumber.trim().length < 1){\r\n            alert('Number can not be empty')\r\n            return \r\n        }\r\n        \r\n        if(persons.filter(person => person.name === newName).length > 0){\r\n            var x = window.confirm(`${newName} already added to phonebook, replace the old number with a new one?`)\r\n            if(x) {\r\n                const person = persons.find(p => p.name === newName)\r\n                const newPerson = {...person, number: newNumber}\r\n\r\n                phonebookService\r\n                    .update(person.id, newPerson)\r\n                    .then(returnedPerson => {\r\n                        setPersons(persons.map(person => person.name !== newName? person: returnedPerson))\r\n                        handleNotificationMessage(returnedPerson.name, 'modified')\r\n                        setNewName('')\r\n                        setNewNumber('')\r\n                    })\r\n                    .catch(error => {\r\n                        console.log(error)\r\n                        handleNotificationMessage(person.name, 'not found')\r\n                    })\r\n            }\r\n            return\r\n        } \r\n        \r\n        else {\r\n            const newObject = {\r\n                name: newName.trim(),\r\n                number: newNumber.trim(),\r\n            }\r\n\r\n            phonebookService\r\n                .create(newObject)\r\n                .then(\r\n                    returnedPerson => {\r\n                        setPersons(persons.concat(returnedPerson))\r\n                        handleNotificationMessage(returnedPerson.name, 'added')\r\n                        setNewName('')\r\n                        setNewNumber('')  \r\n                    }\r\n                )\r\n        }\r\n               \r\n    }\r\n\r\n    const deletePerson = (id, text) => {\r\n        var result = window.confirm(`Delete ${text}?`)\r\n        if(result){\r\n           phonebookService\r\n            .deleteData(id)\r\n            .then(response => {\r\n                if(response.status === 204){\r\n                    setPersons(persons.filter(person => person.id !== id))\r\n                }\r\n            })\r\n            .catch(error=> {\r\n                console.log(error)\r\n                alert(`the person of ${id} was already deleted from server.`)\r\n                setPersons(persons.filter(person => person.id !== id))\r\n            }) \r\n        }\r\n        return\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h2>Phonebook</h2>\r\n            <Notification notification={notificationMessage}/>\r\n            <Filter filterText={filterText} handleFilterChange={handleFilterChange}/>\r\n            <h3>Add a new</h3>\r\n            <PersonForm\r\n                eventHandlers = {{handleSubmit, handleNameChange, handleNumberChange}}\r\n                value = {{newName, newNumber}}\r\n            />\r\n            <h2>Numbers</h2>\r\n            {\r\n                filterText.trim() === '' ? <Persons persons={persons} handleDelete={(id, text)=> deletePerson(id, text)} />\r\n                    : <Persons persons={filteredPersons} handleDelete={(id, text) => deletePerson(id, text)}/>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App;","import ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.render(<App/>, document.getElementById('root'))"],"sourceRoot":""}